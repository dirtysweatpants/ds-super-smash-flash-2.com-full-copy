
var GamePlay=function(){this.ip="";this.ratio=1;this.gameID=0;this.initObject()};GamePlay.prototype.initObject=function(){var a=this;a.playObject=function(){function m(B){return document.getElementById(B)}function u(B){return document.querySelector(B)}function v(C,D){if(typeof D!=="object"&&D.length==0){return}for(var B in D){C.style[B]=D[B]}}function l(B){v(B,{display:"none"})}function z(B){v(B,{display:"block"})}function e(C,B){return C.getAttribute(B)}function n(C,B){if(C.classList.contains(B)===false){C.classList.add(B)}}function s(C,B){if(C.classList.contains(B)===true){C.classList.remove(B)}}function x(B,C){B.textContent=C}function d(C){C=(C===undefined||typeof C!=="string")?"Error send ajax.":C;try{throw new Error(C)}catch(B){console.log(B.name+": "+B.message)}}function k(B){return typeof B==="object"&&B.constructor===Object}function o(B){return typeof B==="string"}function r(B){return typeof B==="number"&&isFinite(B)}function j(D){if(!k(D)){return""}var B=[];for(var C in D){B.push(encodeURIComponent(C)+"="+encodeURIComponent(D[C]))}return B.join("&")}function p(I){if(!k(I)){return d("param add loading invalid.")}if(I.target===undefined){I.target=document.body}if(I.text===undefined){I.text="LOADING..."}var J,D,B,F,C,G,E,H;D="top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.6);margin:0;padding:0;";C="display:table;width:100%;height:100%;";F="display:table-cell;width:100%;height:100%;font-size:15px;vertical-align: middle;text-align:center;color:#fff;letter-spacing:5px;text-shadow:1px 1px 3px #666;";H="width:128px;height:15px;display:block;margin:5px auto;";if(I.target){I.target.style.position="relative";J=document.createElement("div");if(I.target.nodeName.toLowerCase()==="body"){D+="position:fixed;"}else{D+="position:absolute;"}J.id=a.maskID;J.style.cssText=D;G=document.createElement("div");G.style.cssText=C;B=document.createElement("div");B.style.cssText=F;B.appendChild(document.createTextNode(I.text));if(I.imgLoading!==false){E=document.createElement("img");E.src=a.imgLoading;E.style.cssText=H;B.appendChild(E)}G.appendChild(B);J.appendChild(G);I.target.appendChild(J)}}function A(){var B=document.getElementById(a.maskID);if(B){B.parentNode.removeChild(B)}}function g(C){if(!k(C)){return d("param send ajax invalid.")}if(!o(C.type)||!((/^(post|get)$/i).test(C.type))){return d("method invalid.")}if(!o(C.url)||C.url===""){return d("URL invalid.")}if(!k(C.data)){return d("data send invalid.")}var B=(C.addMaskLoading!==undefined&&C.addMaskLoading.status===true);if(B){p({target:C.addMaskLoading.target,imgLoading:C.addMaskLoading.imgLoading,text:C.addMaskLoading.textLoading})}if(!r(C.timeout)){C.timeout=a.timeout}C.type=C.type.toUpperCase();var F,E,D;F=true;D="";E=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");E.timeout=C.timeout;if(C.type==="POST"){if(k(C.data)){D=j(C.data)}E.open("index.html",C.url);E.withCredentials=true;E.setRequestHeader("X-Requested-With","XMLHttpRequest");E.setRequestHeader("Content-Type","application/x-www-form-urlencoded");E.send(D)}else{if(k(C.data)){D=j(C.data);C.url+="?"+D}E.open(C.type,C.url);E.withCredentials=true;E.setRequestHeader("X-Requested-With","XMLHttpRequest");E.send()}E.onreadystatechange=function(){F=(E.readyState===4&&E.status===200)};E.onload=function(){if(B){A()}if(F===true){if(typeof C.success==="function"){C.success(E.response)}}else{if(typeof C.error==="function"){C.error(E.response)}}};E.ontimeout=function(G){if(B){A()}return d("request timeout.")}}function q(B){var C=m("buttonLikeGame");g({type:"POST",url:"/vote",data:{type:B,id:a.gameID,ip:a.ip},addMaskLoading:{status:true,target:C,imgLoading:false,textLoading:"Voting..."},success:function(D){f(D,B)},error:function(D){console.log(D)}})}function f(B,E){B=JSON.parse(B);console.log(B);if(B.success===true){var H,G,F,I;var D,C;D=u("#like");C=u("#dislike");if(E==0){n(D,"is-active");s(C,"is-active");ShowShareDialog()}if(E==1){n(C,"is-active");s(D,"is-active")}H=B.message.like;G=B.message.dislike;F=u("#VU");I=u("#VD");x(F,H+"%");x(I,G+"%")}}function y(){var E,H,C,B,G,J;var D,I;var F=u("#E1 .E4");E=m("fName");H=m("fEmail");C=m("fMessage");B=E.value;G=H.value;J=C.value;I=m("E5");D=m("E6");if(B.length<2){D.innerHTML="Name is required an min 2 character.";return !1}if(G.length<6){D.innerHTML="Email is required an min 6 character.";return !1}if(J.length<10){D.innerHTML="Content message is required an min 10 character.";return !1}g({type:"POST",url:"/feedback",data:{name:B,email:G,message:J,link:location.href},addMaskLoading:{status:true,target:F,imgLoading:false,textLoading:"Sending..."},success:function(K){K=JSON.parse(K);if(K.success){E.value="";H.value="";C.value="";I.innerHTML="Thank you for your feedback.";D.innerHTML="";setTimeout(function(){D.innerHTML="";I.innerHTML="";m("E1").style.display="none"},1000)}else{var L=K.errors||["Error"];D.innerHTML=L.join("<br/>");I.innerHTML=""}},error:function(K){console.log(K)}})}function w(){var C=window,F=document,E=F.documentElement,D=F.getElementsByTagName("body")[0],B=C.innerWidth||E.clientWidth||D.clientWidth,G=C.innerHeight||E.clientHeight||D.clientHeight;return{w:B,h:G}}function i(){var B=m("player"),D=w(),C={h:e(B,"data-game-height")};return D.h/C.h}function t(){var C=m("player"),E=m("GameEmbedSWF"),D=e(C,"data-game-height"),B=e(C,"data-game-width");v(E,{width:"100%",height:"100%"})}function h(){var E=i(),C=m("player"),F=m("GameEmbedSWF"),D=e(C,"data-game-height")*E,B=e(C,"data-game-width")*E;console.log("ratio: "+E);F.style.width=B+"px";F.style.height=D+"px"}function b(){n(document.body,"body-overflow");z(m("exit-full-screen"));var B=m("player");n(B,"bg-fixed");s(B,"zoomIn");h()}function c(){s(document.body,"body-overflow");l(m("exit-full-screen"));var B=m("player");s(B,"bg-fixed");n(B,"zoomIn");t()}return{voteGame:function(B){q(B)},sendFeedback:function(){y()},playFullScreen:function(){b()},exitFullScreen:function(){c()}}}()};function ShowShareDialog(){document.getElementById("S1").style.display="flex";var a=document.querySelector(".S6 input");if(a){a.focus();a.select();console.log(a)}}function ShowFeedBackDialog(){document.getElementById("E1").style.display="flex"}function closeShare(b){var a=document.getElementById("S1");if(b.target==a){a.style.display="none"}}function closeFeedback(b){var a=document.getElementById("E1");if(b.target==a){a.style.display="none"}}function _closeModalForm(a){closeShare(a);closeFeedback(a)}window.addEventListener("click",_closeModalForm,false);function ONMOUSEOVER(){document.getElementById("Body").style.overflow="hidden"}function ONMOUSEOUT(){document.getElementById("Body").style.overflow="auto"}function embedTools(e){var d=document.querySelector(".S6 input");var a=document.querySelector(".S7>a");var c=document.querySelector(".S7>a~a");var b=e;d.addEventListener("click",function(){this.focus();this.select()},false);a.addEventListener("click",function(){d.focus();d.value=b},false);c.addEventListener("click",function(){d.focus();d.select();document.execCommand("Copy");var f=document.querySelector(".S6 .helper");f.textContent="Copied.";f.style.display="block";setTimeout(function(){f.style.display="none"},2000)},false)}function FixedElementScroll(j,i,f){var m=document.getElementById(j);var e=document.getElementById(i);var g=f;var h=e.offsetTop;var l=window.pageYOffset-h;var k=m.offsetTop;var d=e.offsetHeight-g-10;if(l>=5){m.classList.add("ED");if(l>=d){m.style.top=-(l-d)+"px"}else{m.style.top="5px"}}else{m.classList.remove("ED")}}function toggleThu(c){var b=document.getElementById(c);var d=document.getElementById("tocBtn");if(b.style.display==="none"){b.style.display="block";d.innerHTML="[Hide]"}else{b.style.display="none";d.innerHTML="[Show]"}};